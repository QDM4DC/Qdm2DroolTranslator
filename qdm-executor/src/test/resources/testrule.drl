import edu.mayo.qdm.drools.PreconditionResult;
import edu.mayo.bmi.sharp.facts.Patient;
import java.util.List;

rule "Precondition #3"
      dialect "mvel"
  when
      PreconditionResult( id == "Precondition #2" )
  then
      insert(new PreconditionResult("Precondition #3", null))

end

rule "Precondition #1"
      dialect "mvel"
  when
      $p : Patient( age > 30 )
  then
      insert(new PreconditionResult("Precondition #1", $p))

end

rule "Precondition #2"
      dialect "mvel"
  when
      $p : Patient( age < 30 )
  then
	  insert(new PreconditionResult("Precondition #2", $p))
end

rule "Initial Patient Population"
      dialect "mvel"
  when
    $list : List()
        from collect( PreconditionResult( id == "Precondition #1" )
    )

  then
      System.out.println($list);

end

    /* Rule */
        rule "IPP"
            dialect "java"

        when
          $p : Patient()

          PreconditionResult(
            id == "Precondition #1", patient == $p )
            ||
          PreconditionResult(
                      id == "Precondition #2", patient == $p )


        then
            System.out.println($p);
        end